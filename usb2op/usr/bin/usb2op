#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
import urllib2
import simplejson as json

if len(sys.argv) < 2:
  sys.exit(1)

interface = sys.argv[1]
if interface in ["eth0", "wlan0"]:
  print interface
  sys.exit(0)

r = urllib2.urlopen("http://localhost:88/modems").read()
data = json.loads(r)

operators = { 
  "Telenor": "op0",
  "NetCom": "op1",
  "242 14": "op2",
  "ICE Nordisk Mobiltelefon AS" : "op2",

  "voda IT": "op0",
  "TIM": "op1",
  "I WIND": "op2",

  "Orange": "op0",
  "Orange Internet MÃ³vil": "op0",
  "YOIGO": "op1",

  "TelenorS": "op0",
  "Telenor SE": "op0",
  "Telia": "op1",
  "3 SE": "op2",
}

for modem in data:
  if modem.get('ifname','') == interface:  
    op = operators.get(modem.get('ispName',''))
    if op is not None:
      print op
      sys.exit(0)

sys.exit(1)
