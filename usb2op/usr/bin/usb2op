#!/usr/bin/env python

import sys
import urllib2
import simplejson as json

if len(sys.argv) < 2:
  sys.exit(1)

interface = sys.argv[1]
if interface in ["eth0", "wlan0"]:
  print interface
  sys.exit(0)

r = urllib2.urlopen("http://localhost:88/modems").read()
data = json.loads(r)

operators = { 
  "Telenor": "op1",
  "NetCom": "op2",
  "242 14": "op3",
}

for modem in data:
  if modem.get('ifname','') == interface:  
    op = operators.get(modem.get('ispName',''))
    if op is not None:
      print op
      sys.exit(0)

sys.exit(1)
